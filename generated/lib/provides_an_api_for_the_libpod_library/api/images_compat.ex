# NOTE: This file is auto generated by OpenAPI Generator 7.19.0-SNAPSHOT (https://openapi-generator.tech).
# Do not edit this file manually.

defmodule ProvidesAnAPIForTheLibpodLibrary.Api.ImagesCompat do
  @moduledoc """
  API calls for all endpoints tagged `ImagesCompat`.
  """

  alias ProvidesAnAPIForTheLibpodLibrary.Connection
  import ProvidesAnAPIForTheLibpodLibrary.RequestBuilder

  @doc """
  Create image
  Build an image from the given Dockerfile(s)

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `opts` (keyword): Optional parameters
    - `:"Content-Type"` (String.t): 
    - `:"X-Registry-Config"` (String.t): 
    - `:dockerfile` (String.t): Path within the build context to the `Dockerfile`. This is ignored if remote is specified and points to an external `Dockerfile`. 
    - `:t` (String.t): A name and optional tag to apply to the image in the `name:tag` format. If you omit the tag the default latest value is assumed. You can provide several t parameters.
    - `:extrahosts` (String.t): TBD Extra hosts to add to /etc/hosts (As of version 1.xx) 
    - `:remote` (String.t): A Git repository URI or HTTP/HTTPS context URI. If the URI points to a single text file, the file’s contents are placed into a file called Dockerfile and the image is built from that file. If the URI points to a tarball, the file is downloaded by the daemon and the contents therein used as the context for the build. If the URI points to a tarball and the dockerfile parameter is also specified, there must be a file with the corresponding path inside the tarball. (As of version 1.xx) 
    - `:q` (boolean()): Suppress verbose build output 
    - `:nocache` (boolean()): Do not use the cache when building the image (As of version 1.xx) 
    - `:cachefrom` (String.t): JSON array of images used to build cache resolution (As of version 1.xx) 
    - `:pull` (boolean()): Attempt to pull the image even if an older image exists locally (As of version 1.xx) 
    - `:rm` (boolean()): Remove intermediate containers after a successful build (As of version 1.xx) 
    - `:forcerm` (boolean()): Always remove intermediate containers, even upon failure (As of version 1.xx) 
    - `:memory` (integer()): Memory is the upper limit (in bytes) on how much memory running containers can use (As of version 1.xx) 
    - `:memswap` (integer()): MemorySwap limits the amount of memory and swap together (As of version 1.xx) 
    - `:cpushares` (integer()): CPUShares (relative weight (As of version 1.xx) 
    - `:cpusetcpus` (String.t): CPUSetCPUs in which to allow execution (0-3, 0,1) (As of version 1.xx) 
    - `:cpuperiod` (integer()): CPUPeriod limits the CPU CFS (Completely Fair Scheduler) period (As of version 1.xx) 
    - `:cpuquota` (integer()): CPUQuota limits the CPU CFS (Completely Fair Scheduler) quota (As of version 1.xx) 
    - `:buildargs` (String.t): JSON map of string pairs denoting build-time variables. For example, the build argument `Foo` with the value of `bar` would be encoded in JSON as `[\"Foo\":\"bar\"]`.  For example, buildargs={\"Foo\":\"bar\"}.  Note(s): * This should not be used to pass secrets. * The value of buildargs should be URI component encoded before being passed to the API.  (As of version 1.xx) 
    - `:shmsize` (integer()): ShmSize is the \"size\" value to use when mounting an shmfs on the container's /dev/shm directory. Default is 64MB (As of version 1.xx) 
    - `:squash` (boolean()): Silently ignored. Squash the resulting images layers into a single layer (As of version 1.xx) 
    - `:labels` (String.t): JSON map of key, value pairs to set as labels on the new image (As of version 1.xx) 
    - `:networkmode` (String.t): Sets the networking mode for the run commands during build. Supported standard values are:   * `bridge` limited to containers within a single host, port mapping required for external access   * `host` no isolation between host and containers on this network   * `none` disable all networking for this container   * container:<nameOrID> share networking with given container   ---All other values are assumed to be a custom network's name (As of version 1.xx) 
    - `:platform` (String.t): Platform format os[/arch[/variant]] (As of version 1.xx) 
    - `:target` (String.t): Target build stage (As of version 1.xx) 
    - `:outputs` (String.t): output configuration TBD (As of version 1.xx) 
    - `:body` (String.t): A tar archive compressed with one of the following algorithms: identity (no compression), gzip, bzip2, xz. 

  ### Returns

  - `{:ok, ProvidesAnAPIForTheLibpodLibrary.Model.ImageBuild200Response.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_build(Tesla.Env.client(), keyword()) ::
          {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.ImageBuild200Response.t()}
          | {:error, Tesla.Env.t()}
  def image_build(connection, opts \\ []) do
    optional_params = %{
      :"Content-Type" => :headers,
      :"X-Registry-Config" => :headers,
      :dockerfile => :query,
      :t => :query,
      :extrahosts => :query,
      :remote => :query,
      :q => :query,
      :nocache => :query,
      :cachefrom => :query,
      :pull => :query,
      :rm => :query,
      :forcerm => :query,
      :memory => :query,
      :memswap => :query,
      :cpushares => :query,
      :cpusetcpus => :query,
      :cpuperiod => :query,
      :cpuquota => :query,
      :buildargs => :query,
      :shmsize => :query,
      :squash => :query,
      :labels => :query,
      :networkmode => :query,
      :platform => :query,
      :target => :query,
      :outputs => :query,
      :body => :body
    }

    request =
      %{}
      |> method(:post)
      |> url("/build")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ProvidesAnAPIForTheLibpodLibrary.Model.ImageBuild200Response},
      {400, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Create an image
  Create an image by either pulling it from a registry or importing it.

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `opts` (keyword): Optional parameters
    - `:"X-Registry-Auth"` (String.t): A base64-encoded auth configuration.
    - `:fromImage` (String.t): Name of the image to pull. The name may include a tag or digest. This parameter may only be used when pulling an image. The pull is cancelled if the HTTP connection is closed.
    - `:fromSrc` (String.t): Source to import. The value may be a URL from which the image can be retrieved or - to read the image from the request body. This parameter may only be used when importing an image
    - `:repo` (String.t): Repository name given to an image when it is imported. The repo may include a tag. This parameter may only be used when importing an image.
    - `:tag` (String.t): Tag or digest. If empty when pulling an image, this causes all tags for the given image to be pulled.
    - `:message` (String.t): Set commit message for imported image.
    - `:platform` (String.t): Platform in the format os[/arch[/variant]]
    - `:body` (String.t): Image content if fromSrc parameter was used

  ### Returns

  - `{:ok, String.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_create(Tesla.Env.client(), keyword()) ::
          {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:ok, String.t()}
          | {:error, Tesla.Env.t()}
  def image_create(connection, opts \\ []) do
    optional_params = %{
      :"X-Registry-Auth" => :headers,
      :fromImage => :query,
      :fromSrc => :query,
      :repo => :query,
      :tag => :query,
      :message => :query,
      :platform => :query,
      :body => :body
    }

    request =
      %{}
      |> method(:post)
      |> url("/images/create")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Remove Image
  Delete an image from local storage

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `name` (String.t): name or ID of image to delete
  - `opts` (keyword): Optional parameters
    - `:force` (boolean()): remove the image even if used by containers or has other tags
    - `:noprune` (boolean()): not supported. will be logged as an invalid parameter if enabled

  ### Returns

  - `{:ok, [%ImageDelete200ResponseInner{}, ...]}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_delete(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, [ProvidesAnAPIForTheLibpodLibrary.Model.ImageDelete200ResponseInner.t()]}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def image_delete(connection, name, opts \\ []) do
    optional_params = %{
      :force => :query,
      :noprune => :query
    }

    request =
      %{}
      |> method(:delete)
      |> url("/images/#{name}")
      |> add_optional_params(optional_params, opts)
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ProvidesAnAPIForTheLibpodLibrary.Model.ImageDelete200ResponseInner},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {409, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Export an image
  Export an image in tarball format

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `name` (String.t): the name or ID of the container
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, String.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_get(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:ok, String.t()}
          | {:error, Tesla.Env.t()}
  def image_get(connection, name, _opts \\ []) do
    request =
      %{}
      |> method(:get)
      |> url("/images/#{name}/get")
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Export several images
  Get a tarball containing all images and metadata for several image repositories

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `names` (String.t): one or more image names or IDs comma separated
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, String.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_get_all(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:ok, String.t()}
          | {:error, Tesla.Env.t()}
  def image_get_all(connection, names, _opts \\ []) do
    request =
      %{}
      |> method(:get)
      |> url("/images/get")
      |> add_param(:query, :names, names)
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  History of an image
  Return parent layers of an image.

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `name` (String.t): the name or ID of the container
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, ProvidesAnAPIForTheLibpodLibrary.Model.ImageHistory200Response.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_history(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.ImageHistory200Response.t()}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def image_history(connection, name, _opts \\ []) do
    request =
      %{}
      |> method(:get)
      |> url("/images/#{name}/history")
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ProvidesAnAPIForTheLibpodLibrary.Model.ImageHistory200Response},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Inspect an image
  Return low-level information about an image.

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `name` (String.t): the name or ID of the container
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, ProvidesAnAPIForTheLibpodLibrary.Model.ImageInspect200Response.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_inspect(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.ImageInspect200Response.t()}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def image_inspect(connection, name, _opts \\ []) do
    request =
      %{}
      |> method(:get)
      |> url("/images/#{name}/json")
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ProvidesAnAPIForTheLibpodLibrary.Model.ImageInspect200Response},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  List Images
  Returns a list of images on the server. Note that it uses a different, smaller representation of an image than inspecting a single image.

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `opts` (keyword): Optional parameters
    - `:all` (boolean()): Show all images. Only images from a final layer (no children) are shown by default.
    - `:filters` (String.t): A JSON encoded value of the filters (a `map[string][]string`) to process on the images list. Available filters: - `before`=(`<image-name>[:<tag>]`,  `<image id>` or `<image@digest>`) - `dangling=true` - `label=key` or `label=\"key=value\"` of an image label - `reference`=(`<image-name>[:<tag>]`) - `since`=(`<image-name>[:<tag>]`,  `<image id>` or `<image@digest>`) 
    - `:digests` (boolean()): Not supported

  ### Returns

  - `{:ok, [%ImageSummary{}, ...]}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_list(Tesla.Env.client(), keyword()) ::
          {:ok, [ProvidesAnAPIForTheLibpodLibrary.Model.ImageSummary.t()]}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def image_list(connection, opts \\ []) do
    optional_params = %{
      :all => :query,
      :filters => :query,
      :digests => :query
    }

    request =
      %{}
      |> method(:get)
      |> url("/images/json")
      |> add_optional_params(optional_params, opts)
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ProvidesAnAPIForTheLibpodLibrary.Model.ImageSummary},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Import image
  Load a set of images and tags into a repository.

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `opts` (keyword): Optional parameters
    - `:quiet` (boolean()): not supported
    - `:body` (String.t): tarball of container image

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_load(Tesla.Env.client(), keyword()) ::
          {:ok, nil}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def image_load(connection, opts \\ []) do
    optional_params = %{
      :quiet => :query,
      :body => :body
    }

    request =
      %{}
      |> method(:post)
      |> url("/images/load")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Prune unused images
  Remove images from local storage that are not being used by a container

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `opts` (keyword): Optional parameters
    - `:filters` (String.t): filters to apply to image pruning, encoded as JSON (map[string][]string). Available filters:   - `dangling=<boolean>` When set to `true` (or `1`), prune only      unused *and* untagged images. When set to `false`      (or `0`), all unused images are pruned.   - `until=<string>` Prune images created before this timestamp. The `<timestamp>` can be Unix timestamps, date formatted timestamps, or Go duration strings (e.g. `10m`, `1h30m`) computed relative to the daemon machine’s time.   - `label` (`label=<key>`, `label=<key>=<value>`, `label!=<key>`, or `label!=<key>=<value>`) Prune images with (or without, in case `label!=...` is used) the specified labels. 

  ### Returns

  - `{:ok, [%ImageDelete200ResponseInner{}, ...]}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_prune(Tesla.Env.client(), keyword()) ::
          {:ok, [ProvidesAnAPIForTheLibpodLibrary.Model.ImageDelete200ResponseInner.t()]}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def image_prune(connection, opts \\ []) do
    optional_params = %{
      :filters => :query
    }

    request =
      %{}
      |> method(:post)
      |> url("/images/prune")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ProvidesAnAPIForTheLibpodLibrary.Model.ImageDelete200ResponseInner},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Push Image
  Push an image to a container registry

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `name` (String.t): Name of image to push.
  - `opts` (keyword): Optional parameters
    - `:tag` (String.t): The tag to associate with the image on the registry.
    - `:all` (boolean()): All indicates whether to push all images related to the image list
    - `:compress` (boolean()): use compression on image
    - `:destination` (String.t): destination name for the image being pushed
    - `:"X-Registry-Auth"` (String.t): A base64-encoded auth configuration.

  ### Returns

  - `{:ok, String.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_push(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:ok, String.t()}
          | {:error, Tesla.Env.t()}
  def image_push(connection, name, opts \\ []) do
    optional_params = %{
      :tag => :query,
      :all => :query,
      :compress => :query,
      :destination => :query,
      :"X-Registry-Auth" => :headers
    }

    request =
      %{}
      |> method(:post)
      |> url("/images/#{name}/push")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Search images
  Search registries for an image

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `opts` (keyword): Optional parameters
    - `:term` (String.t): term to search
    - `:limit` (integer()): maximum number of results
    - `:filters` (String.t): A JSON encoded value of the filters (a `map[string][]string`) to process on the images list. Available filters: - `is-automated=(true|false)` - `is-official=(true|false)` - `stars=<number>` Matches images that has at least 'number' stars. 
    - `:tlsVerify` (boolean()): skip TLS verification for registries
    - `:listTags` (boolean()): list the available tags in the repository

  ### Returns

  - `{:ok, ProvidesAnAPIForTheLibpodLibrary.Model.ImageSearch200Response.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_search(Tesla.Env.client(), keyword()) ::
          {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.ImageSearch200Response.t()}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def image_search(connection, opts \\ []) do
    optional_params = %{
      :term => :query,
      :limit => :query,
      :filters => :query,
      :tlsVerify => :query,
      :listTags => :query
    }

    request =
      %{}
      |> method(:get)
      |> url("/images/search")
      |> add_optional_params(optional_params, opts)
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ProvidesAnAPIForTheLibpodLibrary.Model.ImageSearch200Response},
      {400, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Tag an image
  Tag an image so that it becomes part of a repository.

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `name` (String.t): the name or ID of the container
  - `opts` (keyword): Optional parameters
    - `:repo` (String.t): the repository to tag in
    - `:tag` (String.t): the name of the new tag

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec image_tag(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, nil}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def image_tag(connection, name, opts \\ []) do
    optional_params = %{
      :repo => :query,
      :tag => :query
    }

    request =
      %{}
      |> method(:post)
      |> url("/images/#{name}/tag")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {201, false},
      {400, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {409, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end
end
