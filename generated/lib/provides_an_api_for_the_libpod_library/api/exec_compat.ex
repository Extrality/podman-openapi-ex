# NOTE: This file is auto generated by OpenAPI Generator 7.19.0-SNAPSHOT (https://openapi-generator.tech).
# Do not edit this file manually.

defmodule ProvidesAnAPIForTheLibpodLibrary.Api.ExecCompat do
  @moduledoc """
  API calls for all endpoints tagged `ExecCompat`.
  """

  alias ProvidesAnAPIForTheLibpodLibrary.Connection
  import ProvidesAnAPIForTheLibpodLibrary.RequestBuilder

  @doc """
  Create an exec instance
  Create an exec session to run a command inside a running container. Exec sessions will be automatically removed 5 minutes after they exit.

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `name` (String.t): name of container
  - `opts` (keyword): Optional parameters
    - `:body` (ContainerExecRequest): Attributes for create

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec container_exec(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, nil}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def container_exec(connection, name, opts \\ []) do
    optional_params = %{
      :body => :body
    }

    request =
      %{}
      |> method(:post)
      |> url("/containers/#{name}/exec")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {201, false},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {409, false},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Inspect an exec instance
  Return low-level information about an exec instance.

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `id` (String.t): Exec instance ID
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec exec_inspect(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, nil}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def exec_inspect(connection, id, _opts \\ []) do
    request =
      %{}
      |> method(:get)
      |> url("/exec/#{id}/json")
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Resize an exec instance
  Resize the TTY session used by an exec instance. This endpoint only works if tty was specified as part of creating and starting the exec instance. 

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `id` (String.t): Exec instance ID
  - `opts` (keyword): Optional parameters
    - `:h` (integer()): Height of the TTY session in characters
    - `:w` (integer()): Width of the TTY session in characters
    - `:running` (boolean()): Ignore containers not running errors

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec exec_resize(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, nil}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def exec_resize(connection, id, opts \\ []) do
    optional_params = %{
      :h => :query,
      :w => :query,
      :running => :query
    }

    request =
      %{}
      |> method(:post)
      |> url("/exec/#{id}/resize")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {201, false},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end

  @doc """
  Start an exec instance
  Starts a previously set up exec instance. If detach is true, this endpoint returns immediately after starting the command. Otherwise, it sets up an interactive session with the command.

  ### Parameters

  - `connection` (ProvidesAnAPIForTheLibpodLibrary.Connection): Connection to server
  - `id` (String.t): Exec instance ID
  - `opts` (keyword): Optional parameters
    - `:body` (ExecStartRequest): Attributes for start

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec exec_start(Tesla.Env.client(), String.t(), keyword()) ::
          {:ok, nil}
          | {:ok, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response.t()}
          | {:error, Tesla.Env.t()}
  def exec_start(connection, id, opts \\ []) do
    optional_params = %{
      :body => :body
    }

    request =
      %{}
      |> method(:post)
      |> url("/exec/#{id}/start")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.into([])

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {404, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response},
      {409, false},
      {500, ProvidesAnAPIForTheLibpodLibrary.Model.SystemAuth500Response}
    ])
  end
end
